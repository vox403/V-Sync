<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>전투 결과 생성기</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 600px;
      margin: 30px auto;
      padding: 20px;
      border: 1px solid #ccc;
      border-radius: 10px;
    }
    h1 {
      text-align: center;
      font-size: 20px;
    }
    label {
      display: block;
      margin-top: 10px;
    }
    input {
      width: 100%;
      padding: 5px;
      margin-top: 5px;
      box-sizing: border-box;
    }
    button {
      margin-top: 15px;
      width: 100%;
      padding: 10px;
      font-size: 16px;
      cursor: pointer;
    }

    /* 결과 박스 */
    .result {
      margin-top: 20px;
      padding: 10px;
      border-radius: 8px;
      background: #f5f5f5;
      white-space: pre-line;
    }

    /* 전투 로그 */
    #logBox {
      margin-top: 25px;
      padding: 10px;
      border-radius: 8px;
      background: #fafafa;
      border: 1px solid #ddd;
      max-height: 400px;
      overflow-y: auto;
      font-size: 14px;
    }

    .log-entry {
      padding: 10px;
      border-bottom: 1px solid #eee;
      white-space: pre-line;
      border-radius: 6px;
      margin-bottom: 8px;
    }

    /* 색상 */
    .injury-none { background-color: #e0e0e0; }
    .injury-light { background-color: #fff6a3; }
    .injury-mid { background-color: #a8d2ff; }
    .injury-heavy { background-color: #ffb0b0; }

  </style>
</head>
<body>

  <h1>전투 결과 생성기</h1>

  <label>
    A 이름:
    <input type="text" id="nameA" placeholder="예: A">
  </label>

  <label>
    B 이름:
    <input type="text" id="nameB" placeholder="예: B">
  </label>

  <button onclick="startBattle()">전투 시작!</button>

  <div class="result" id="resultBox"></div>

  <h2>전투 로그</h2>
  <div id="logBox"></div>

  <script>
    function getInjuryLevel(diff) {
      if (diff === 0) return "무승부 (상처 없음)";
      if (diff <= 2) return "경상 (타박상, 경미한 출혈)";
      if (diff <= 7) return "중상 (골절, 신체 훼손 등 심각한 부상)";
      return "치명상 (의식 소실 or 사망)";
    }

    function getInjuryClass(diff) {
      if (diff === 0) return "injury-none";
      if (diff <= 2) return "injury-light";
      if (diff <= 7) return "injury-mid";
      return "injury-heavy";
    }

    function startBattle() {
      const nameA = document.getElementById("nameA").value || "A";
      const nameB = document.getElementById("nameB").value || "B";

      const numA = Math.floor(Math.random() * 10) + 1;
      const numB = Math.floor(Math.random() * 10) + 1;

      let winnerText = "";
      if (numA > numB) winnerText = `${nameA}의 승리!`;
      else if (numB > numA) winnerText = `${nameB}의 승리!`;
      else winnerText = "무승부!";

      const diff = Math.abs(numA - numB);
      const injury = getInjuryLevel(diff);

      const resultText =
        `${nameA}: ${numA}\n` +
        `${nameB}: ${numB}\n` +
        `차이: ${diff}\n\n` +
        `결과: ${winnerText}\n` +
        `상태: ${injury}`;

      document.getElementById("resultBox").textContent = resultText;

      addLog(nameA, nameB, numA, numB, diff, winnerText, injury);
    }

    function addLog(nameA, nameB, numA, numB, diff, winnerText, injury) {
      const logBox = document.getElementById("logBox");
      const div = document.createElement("div");

      div.className = "log-entry " + getInjuryClass(diff);

      div.textContent =
        `[${new Date().toLocaleTimeString()}]\n` +
        `${nameA}: ${numA} / ${nameB}: ${numB}\n` +
        `차이: ${diff}\n` +
        `승리: ${winnerText}\n` +
        `상태: ${injury}`;

      logBox.prepend(div); // 최신 로그가 위로 오도록
    }
  </script>

</body>
</html>
